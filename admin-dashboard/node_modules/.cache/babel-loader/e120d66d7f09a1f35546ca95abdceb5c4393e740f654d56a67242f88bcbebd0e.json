{"ast":null,"code":"// @ts-ignore\nimport React,{useEffect,useState}from\"react\";import{Typography,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Button,Paper,Link,Box,CircularProgress}from\"@mui/material\";import api from\"./services/api\";// Define Agent interface for proper typing\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AgentKYCReviewScreen(){// Properly type the state\nconst[agents,setAgents]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{setLoading(true);api.get(\"/admin/agents-kyc?status=pending\").then(res=>{setAgents(res.data);setLoading(false);}).catch(err=>{console.error(\"Error fetching KYC requests:\",err);setLoading(false);});},[]);// Add proper type annotations\nconst updateKYC=async(agentId,status)=>{try{await api.post(\"/admin/agent/kyc/verify\",{agent_id:agentId,status});setAgents(prev=>prev.filter(a=>a.id!==agentId));}catch(err){console.error(\"Error updating KYC status:\",err);}};if(loading){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",minHeight:\"300px\",children:/*#__PURE__*/_jsx(CircularProgress,{})});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Pending KYC Requests\"}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Agent Name\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Document Type\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Document\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Actions\"})]})}),/*#__PURE__*/_jsxs(TableBody,{children:[agents.map(item=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:item.name}),/*#__PURE__*/_jsx(TableCell,{children:item.kyc_document_type}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Link,{href:item.kyc_document_path,target:\"_blank\",rel:\"noopener\",children:\"View Document\"})}),/*#__PURE__*/_jsxs(TableCell,{children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>updateKYC(item.id,\"verified\"),sx:{mr:1},children:\"Verify\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"error\",onClick:()=>updateKYC(item.id,\"rejected\"),children:\"Reject\"})]})]},item.id)),agents.length===0&&/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:4,align:\"center\",children:\"No pending KYC requests found\"})})]})]})})]});}","map":{"version":3,"names":["React","useEffect","useState","Typography","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Button","Paper","Link","Box","CircularProgress","api","jsx","_jsx","jsxs","_jsxs","AgentKYCReviewScreen","agents","setAgents","loading","setLoading","get","then","res","data","catch","err","console","error","updateKYC","agentId","status","post","agent_id","prev","filter","a","id","display","justifyContent","alignItems","minHeight","children","variant","gutterBottom","component","map","item","name","kyc_document_type","href","kyc_document_path","target","rel","color","onClick","sx","mr","length","colSpan","align"],"sources":["/workspaces/clicko/admin-dashboard/src/AgentKYCReviewScreen.tsx"],"sourcesContent":["// @ts-ignore\nimport React, { useEffect, useState } from \"react\";\nimport { \n  Typography, Table, TableBody, TableCell, TableContainer, \n  TableHead, TableRow, Button, Paper, Link, Box, CircularProgress \n} from \"@mui/material\";\nimport api from \"./services/api\";\n\n// Define Agent interface for proper typing\ninterface Agent {\n  id: number;\n  name: string;\n  kyc_document_type: string;\n  kyc_document_path: string;\n}\n\nexport default function AgentKYCReviewScreen() {\n  // Properly type the state\n  const [agents, setAgents] = useState<Agent[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    setLoading(true);\n    api.get(\"/admin/agents-kyc?status=pending\")\n      .then((res) => {\n        setAgents(res.data);\n        setLoading(false);\n      })\n      .catch(err => {\n        console.error(\"Error fetching KYC requests:\", err);\n        setLoading(false);\n      });\n  }, []);\n\n  // Add proper type annotations\n  const updateKYC = async (agentId: number, status: string) => {\n    try {\n      await api.post(\"/admin/agent/kyc/verify\", { \n        agent_id: agentId, \n        status \n      });\n      setAgents((prev) => prev.filter((a) => a.id !== agentId));\n    } catch (err) {\n      console.error(\"Error updating KYC status:\", err);\n    }\n  };\n\n  if (loading) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"300px\">\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <div>\n      <Typography variant=\"h5\" gutterBottom>\n        Pending KYC Requests\n      </Typography>\n      \n      <TableContainer component={Paper}>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Agent Name</TableCell>\n              <TableCell>Document Type</TableCell>\n              <TableCell>Document</TableCell>\n              <TableCell>Actions</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {agents.map((item) => (\n              <TableRow key={item.id}>\n                <TableCell>{item.name}</TableCell>\n                <TableCell>{item.kyc_document_type}</TableCell>\n                <TableCell>\n                  <Link href={item.kyc_document_path} target=\"_blank\" rel=\"noopener\">\n                    View Document\n                  </Link>\n                </TableCell>\n                <TableCell>\n                  <Button \n                    variant=\"contained\" \n                    color=\"primary\" \n                    onClick={() => updateKYC(item.id, \"verified\")}\n                    sx={{ mr: 1 }}\n                  >\n                    Verify\n                  </Button>\n                  <Button \n                    variant=\"contained\" \n                    color=\"error\" \n                    onClick={() => updateKYC(item.id, \"rejected\")}\n                  >\n                    Reject\n                  </Button>\n                </TableCell>\n              </TableRow>\n            ))}\n            {agents.length === 0 && (\n              <TableRow>\n                <TableCell colSpan={4} align=\"center\">\n                  No pending KYC requests found\n                </TableCell>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}